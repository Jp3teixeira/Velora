<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.paint.*?>
<?import javafx.collections.*?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<?import java.lang.String?>
<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="controller.UserManagementController"
            style="-fx-background-color: #f8f9fa;"
            prefHeight="700.0" prefWidth="1200.0">

    <!-- Top Navigation Bar -->
    <HBox style="-fx-background-color: #2c3e50; -fx-padding: 12 20;"
          spacing="30" alignment="CENTER_LEFT"
          AnchorPane.topAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
        <Label text="Velora" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 18;"/>

        <Button text="Home" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
        <Button text="Portfolio"
                onAction="#goToWallet"
        style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"
        styleClass="menu-button"/>
        <Button fx:id="marketButton" text="Market"
                onAction="#goToMarket"
                style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
        <Button text="Research" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
        <Button text="Transfer &amp; Pay" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
        <Button text="Performance &amp; Reports" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
        <Button text="Education" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>

        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Account" style="-fx-text-fill: white; -fx-background-color: transparent; -fx-font-size: 14;"/>
    </HBox>

    <!-- Main Content Area -->
    <VBox spacing="15" style="-fx-padding: 20;"
          AnchorPane.topAnchor="50" AnchorPane.bottomAnchor="20" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20">

        <!-- Portfolio Summary Section -->
        <VBox style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Your Portfolio" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="All Accounts" style="-fx-text-fill: #3498db; -fx-font-size: 14;"/>
            </HBox>

            <TableView style="-fx-background-color: transparent; -fx-table-cell-border-color: transparent;">
                <columns>
                    <TableColumn text="Account" style="-fx-font-weight: bold;"/>
                    <TableColumn text="Value" style="-fx-font-weight: bold;"/>
                    <TableColumn text="Change (YTD)" style="-fx-font-weight: bold;"/>
                    <TableColumn text="Positions" style="-fx-font-weight: bold;"/>
                    <TableColumn text="Performance" style="-fx-font-weight: bold;"/>
                </columns>
                <!-- Sample data rows would be added here -->
            </TableView>

            <!-- Performance Graph - Corrected LineChart implementation -->
            <VBox style="-fx-padding: 15 0 0 0;">
                <LineChart fx:id="performanceChart" prefHeight="150" animated="false" legendVisible="false">
                    <xAxis>
                        <CategoryAxis side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis side="LEFT" />
                    </yAxis>
                </LineChart>
            </VBox>
        </VBox>

        <!-- Two Columns Layout -->
        <HBox spacing="15">
            <!-- Left Column -->
            <VBox spacing="15" prefWidth="400">
                <!-- For You Section -->
                <VBox style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                    <Label text="For You" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                    <VBox spacing="10" style="-fx-padding: 5 0;">
                        <Label text="• Buy 300 IBKR @ 81:21 USD order has filled!" style="-fx-text-fill: #333;"/>
                        <Label text="• You collected 300 USD in dividends. Biggest contributor is IBKR with 200 USD." style="-fx-text-fill: #333;"/>
                        <Label text="• Your deposit of 10,000 USD submitted on 08/10/23 is available." style="-fx-text-fill: #333;"/>
                    </VBox>
                </VBox>

                <!-- Market Update -->
                <VBox style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                    <Label text="BRIEFING.COM MARKET UPDATE" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                    <Text style="-fx-font-size: 14; -fx-fill: #333;">
                        Tech Shares Push Nasdaq to New Record
                        <Font name="System Bold"/>
                    </Text>
                    <Text style="-fx-font-size: 13; -fx-fill: #666;">
                        10:00 ET I Equity indices are up in the opening minutes, with the S&amp;P 500 higher by 0.3%.
                        The Nasdaq (+0.6%) is at a new all-time high.
                    </Text>
                    <Text style="-fx-font-size: 13; -fx-fill: #666;">
                        More than half of the 11 S&amp;P sectors are in the mean this morning, with financials...
                    </Text>
                </VBox>
            </VBox>

            <!-- Right Column - Top Positions -->
            <VBox style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                <Label text="TOP Portfolio Positions" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                <TableView style="-fx-background-color: transparent;">
                    <columns>
                        <TableColumn text="SYMBOL" style="-fx-font-weight: bold;"/>
                        <TableColumn text="LAST" style="-fx-font-weight: bold;"/>
                        <TableColumn text="CHANGE" style="-fx-font-weight: bold;"/>
                        <TableColumn text="MKT VALUE" style="-fx-font-weight: bold;"/>
                    </columns>
                    <!-- Sample data rows would be added here -->
                </TableView>
            </VBox>
        </HBox>
    </VBox>

    <Label text="Saldo: ">
        <text>
            <String fx:value="Saldo: "/>
        </text>
    </Label>
    <Label>
        <text>${SessaoAtual.saldoCarteira}</text>
        <styleClass>
            <String fx:value="saldo-label"/>
        </styleClass>
    </Label>

    <!-- Bottom Logout Button -->
    <Button text="LOGOUT" onAction="#handleLogOut"
            style="-fx-background-color: #4B3F72; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px; -fx-background-radius: 15; -fx-cursor: hand; -fx-padding: 8 25;"
            AnchorPane.bottomAnchor="15" AnchorPane.rightAnchor="20"/>
</AnchorPane>